{% extends "base.html" %}
{% block title %}Detalle de copia{% endblock %}

{% block content %}
<div class="page-header d-flex justify-content-between align-items-center">
    <div>
        <h1 class="h3 mb-1">{{ backup.name }}</h1>
        <p class="text-muted mb-0">Tipo {{ backup.get_backup_type_display }} 路 Estado {{ backup.get_status_display }}</p>
    </div>
    <div class="d-flex gap-2">
        <a class="btn btn-outline-secondary" href="{% url 'backup:backup_list' %}">Volver</a>
        <a class="btn btn-primary" href="{% url 'backup:backup_restore' backup.pk %}">
            <i class="bi bi-arrow-repeat"></i> Restaurar
        </a>
    </div>
</div>

<div class="row g-3 mt-3">
    <div class="col-12 col-lg-6">
        <div class="card h-100">
            <div class="card-header">
                <h2 class="h5 mb-0">Informaci贸n general</h2>
            </div>
            <div class="card-body">
                <dl class="row mb-0">
                    <dt class="col-sm-4">Tipo</dt>
                    <dd class="col-sm-8">{{ backup.get_backup_type_display }}</dd>
                    <dt class="col-sm-4">Estado</dt>
                    <dd class="col-sm-8">{{ backup.get_status_display }}</dd>
                    <dt class="col-sm-4">Inicio</dt>
                    <dd class="col-sm-8">{{ backup.started_at|date:"d/m/Y H:i"|default:"-" }}</dd>
                    <dt class="col-sm-4">Fin</dt>
                    <dd class="col-sm-8">{{ backup.finished_at|date:"d/m/Y H:i"|default:"-" }}</dd>
                    <dt class="col-sm-4">Creado por</dt>
                    <dd class="col-sm-8">{{ backup.created_by.get_full_name|default:backup.created_by|default:"Sistema" }}</dd>
                </dl>
            </div>
        </div>
    </div>
    <div class="col-12 col-lg-6">
        <div class="card h-100">
            <div class="card-header">
                <h2 class="h5 mb-0">Descripci贸n</h2>
            </div>
            <div class="card-body">
                <p class="mb-0">{{ backup.description|default:"Sin descripci贸n" }}</p>
            </div>
        </div>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h2 class="h5 mb-0">Registro del proceso</h2>
        {% if backup.file %}
            <a class="btn btn-sm btn-outline-primary" href="{{ backup.file.url }}" download>
                <i class="bi bi-download"></i> Descargar archivo
            </a>
        {% endif %}
    </div>
    <div class="card-body">
        <pre class="bg-light p-3 rounded small mb-0">{{ backup.log|default:"Sin registros" }}</pre>
    </div>
</div>
{% endblock %}
